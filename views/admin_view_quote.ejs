<%- include('partials/header', { title: `Admin View - ${quote.quote_number}` }) %>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h1>Admin View: <%= quote.quote_number %></h1>
        <a href="/admin" class="btn btn-secondary">Back to Dashboard</a>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h2>Customer Details (Visible to Admin Only)</h2>
                    </div>
                    <div class="card-body">
                        <p><strong>First Name:</strong> <%= quote.customer_first_name %></p>
                        <p><strong>Surname:</strong> <%= quote.customer_surname %></p>
                        <p><strong>Mobile:</strong> <%= quote.customer_mobile %></p>
                        <p><strong>Email:</strong> <%= quote.customer_email %></p>
                        <p><strong>Zoho ID:</strong> <%= quote.zoho_id %></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h2>Quote Details</h2>
                    </div>
                    <div class="card-body">
                        <p><strong>Created:</strong> <%= new Date(quote.created_at).toLocaleString() %></p>
                        <p><strong>Last Updated:</strong> <%= new Date(quote.updated_at).toLocaleString() %></p>
                        <p><strong>Gold (oz):</strong> $<%= Number(quote.spot_price_gold_ounce_nzd).toFixed(2) %></p>
                        <p><strong>Gold (g):</strong> $<%= Number(quote.spot_price_gold_gram_nzd).toFixed(2) %></p>
                        <p><strong>Silver (oz):</strong> $<%= Number(quote.spot_price_silver_ounce_nzd).toFixed(2) %></p>
                        <p><strong>Silver (g):</strong> $<%= Number(quote.spot_price_silver_gram_nzd).toFixed(2) %></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h3>Items</h3>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Item Name</th>
                            <th>Metal Type</th>
                            <th>Percent</th>
                            <th>Weight (g)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% items.forEach(item => { %>
                            <tr>
                                <td><%= item.item_name %></td>
                                <td><%= item.metal_type %></td>
                                <td><%= item.percent %> %</td>
                                <td><%= item.weight %> g</td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>
